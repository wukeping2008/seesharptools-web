<template>
  <div class="oscilloscope-view">
    <div class="page-header">
      <h1 class="page-title">æ•°å­—ç¤ºæ³¢å™¨</h1>
      <p class="page-subtitle">ä¸“ä¸šçº§æ•°å­—ç¤ºæ³¢å™¨æ§ä»¶ï¼Œæ”¯æŒå¤šé€šé“æ³¢å½¢æ˜¾ç¤ºã€è§¦å‘å’Œæµ‹é‡åŠŸèƒ½</p>
    </div>

    <!-- ç¤ºæ³¢å™¨æ¼”ç¤º -->
    <section class="demo-section">
      <div class="section-header">
        <h2 class="section-title">ç¤ºæ³¢å™¨æ§ä»¶æ¼”ç¤º</h2>
        <p class="section-description">
          å®Œæ•´çš„ç¤ºæ³¢å™¨åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¤šé€šé“æ˜¾ç¤ºã€è§¦å‘æ§åˆ¶ã€è‡ªåŠ¨æµ‹é‡ç­‰
        </p>
      </div>

      <div class="demo-container">
        <Oscilloscope
          @running-change="handleRunningChange"
          @trigger-event="handleTriggerEvent"
          @measurement-update="handleMeasurementUpdate"
        />
      </div>
    </section>

    <!-- åŠŸèƒ½ç‰¹æ€§è¯´æ˜ -->
    <section class="features-section">
      <div class="section-header">
        <h2 class="section-title">åŠŸèƒ½ç‰¹æ€§</h2>
      </div>

      <div class="features-grid">
        <div class="feature-item">
          <div class="feature-icon">ğŸ“Š</div>
          <h4>å¤šé€šé“æ˜¾ç¤º</h4>
          <p>æ”¯æŒ4é€šé“åŒæ­¥æ˜¾ç¤ºï¼Œæ¯é€šé“ç‹¬ç«‹é…ç½®ç”µå‹åˆ»åº¦ã€ä½ç½®å’Œè€¦åˆæ–¹å¼</p>
        </div>

        <div class="feature-item">
          <div class="feature-icon">âš¡</div>
          <h4>è§¦å‘ç³»ç»Ÿ</h4>
          <p>è¾¹æ²¿ã€è„‰å®½ã€è§†é¢‘è§¦å‘ï¼Œæ”¯æŒä¸Šå‡æ²¿ã€ä¸‹é™æ²¿å’ŒåŒè¾¹æ²¿è§¦å‘</p>
        </div>

        <div class="feature-item">
          <div class="feature-icon">ğŸ“</div>
          <h4>è‡ªåŠ¨æµ‹é‡</h4>
          <p>é¢‘ç‡ã€å‘¨æœŸã€å¹…åº¦ã€RMSã€ä¸Šå‡æ—¶é—´ã€ä¸‹é™æ—¶é—´ã€å ç©ºæ¯”ç­‰11ç§æµ‹é‡</p>
        </div>

        <div class="feature-item">
          <div class="feature-icon">â±ï¸</div>
          <h4>æ—¶åŸºæ§åˆ¶</h4>
          <p>1ns/divåˆ°10s/divæ—¶åŸºèŒƒå›´ï¼Œæ”¯æŒæ­£å¸¸ã€æ»šåŠ¨ã€XYæ˜¾ç¤ºæ¨¡å¼</p>
        </div>

        <div class="feature-item">
          <div class="feature-icon">ğŸ¯</div>
          <h4>é‡‡é›†æ§åˆ¶</h4>
          <p>é‡‡æ ·ã€å¹³å‡ã€åŒ…ç»œé‡‡é›†æ¨¡å¼ï¼Œ1Kåˆ°1Mé‡‡é›†æ·±åº¦ï¼Œ1MS/såˆ°1GS/sé‡‡æ ·ç‡</p>
        </div>

        <div class="feature-item">
          <div class="feature-icon">ğŸ”§</div>
          <h4>ä¸“ä¸šé…ç½®</h4>
          <p>å¸¦å®½é™åˆ¶ã€æ¢å¤´å€æ•°ã€åç›¸æ˜¾ç¤ºç­‰ä¸“ä¸šç¤ºæ³¢å™¨åŠŸèƒ½</p>
        </div>
      </div>
    </section>

    <!-- æŠ€æœ¯è§„æ ¼ -->
    <section class="specs-section">
      <div class="section-header">
        <h2 class="section-title">æŠ€æœ¯è§„æ ¼</h2>
      </div>

      <div class="specs-grid">
        <div class="spec-category">
          <h4>é€šé“ç‰¹æ€§</h4>
          <div class="spec-items">
            <div class="spec-item">
              <span class="spec-label">é€šé“æ•°é‡:</span>
              <span class="spec-value">4é€šé“</span>
            </div>
            <div class="spec-item">
              <span class="spec-label">å‚ç›´åˆ†è¾¨ç‡:</span>
              <span class="spec-value">8ä½</span>
            </div>
            <div class="spec-item">
              <span class="spec-label">ç”µå‹èŒƒå›´:</span>
              <span class="spec-value">1mV/div - 10V/div</span>
            </div>
          </div>
        </div>

        <div class="spec-category">
          <h4>æ—¶åŸºç‰¹æ€§</h4>
          <div class="spec-items">
            <div class="spec-item">
              <span class="spec-label">æ—¶åŸºèŒƒå›´:</span>
              <span class="spec-value">1ns/div - 10s/div</span>
            </div>
            <div class="spec-item">
              <span class="spec-label">é‡‡æ ·ç‡:</span>
              <span class="spec-value">1MS/s - 1GS/s</span>
            </div>
            <div class="spec-item">
              <span class="spec-label">è®°å½•é•¿åº¦:</span>
              <span class="spec-value">1K - 1Mç‚¹</span>
            </div>
          </div>
        </div>

        <div class="spec-category">
          <h4>è§¦å‘ç‰¹æ€§</h4>
          <div class="spec-items">
            <div class="spec-item">
              <span class="spec-label">è§¦å‘ç±»å‹:</span>
              <span class="spec-value">è¾¹æ²¿/è„‰å®½/è§†é¢‘</span>
            </div>
            <div class="spec-item">
              <span class="spec-label">è§¦å‘æº:</span>
              <span class="spec-value">CH1-4/å¤–éƒ¨</span>
            </div>
            <div class="spec-item">
              <span class="spec-label">è§¦å‘ç”µå¹³:</span>
              <span class="spec-value">Â±10V</span>
            </div>
          </div>
        </div>

        <div class="spec-category">
          <h4>æµ‹é‡åŠŸèƒ½</h4>
          <div class="spec-items">
            <div class="spec-item">
              <span class="spec-label">è‡ªåŠ¨æµ‹é‡:</span>
              <span class="spec-value">11ç§å‚æ•°</span>
            </div>
            <div class="spec-item">
              <span class="spec-label">æ¸¸æ ‡æµ‹é‡:</span>
              <span class="spec-value">æ—¶é—´/ç”µå‹</span>
            </div>
            <div class="spec-item">
              <span class="spec-label">ç»Ÿè®¡åŠŸèƒ½:</span>
              <span class="spec-value">æœ€å€¼/å¹³å‡/æ ‡å‡†å·®</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- çŠ¶æ€ç›‘æ§ -->
    <section class="monitoring-section" v-if="currentStatus">
      <div class="section-header">
        <h2 class="section-title">å®æ—¶çŠ¶æ€ç›‘æ§</h2>
      </div>

      <div class="monitoring-grid">
        <div class="monitor-card">
          <h4>è¿è¡ŒçŠ¶æ€</h4>
          <div class="monitor-value" :class="currentStatus.running ? 'active' : 'inactive'">
            {{ currentStatus.running ? 'è¿è¡Œä¸­' : 'å·²åœæ­¢' }}
          </div>
        </div>

        <div class="monitor-card">
          <h4>è§¦å‘çŠ¶æ€</h4>
          <div class="monitor-value">{{ currentStatus.triggerStatus || 'å·²åœæ­¢' }}</div>
        </div>

        <div class="monitor-card">
          <h4>é‡‡æ ·ç‡</h4>
          <div class="monitor-value">{{ currentStatus.sampleRate || '100MS/s' }}</div>
        </div>

        <div class="monitor-card">
          <h4>æ—¶åŸº</h4>
          <div class="monitor-value">{{ currentStatus.timebase || '1ms/div' }}</div>
        </div>

        <div class="monitor-card">
          <h4>æ´»åŠ¨é€šé“</h4>
          <div class="monitor-value">{{ currentStatus.activeChannels || 'CH1, CH2' }}</div>
        </div>

        <div class="monitor-card">
          <h4>æµ‹é‡æ•°é‡</h4>
          <div class="monitor-value">{{ currentStatus.measurementCount || 0 }}</div>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import Oscilloscope from '@/components/instruments/Oscilloscope.vue'

// å“åº”å¼æ•°æ®
const currentStatus = ref<any>({
  running: false,
  triggerStatus: 'å·²åœæ­¢',
  sampleRate: '100MS/s',
  timebase: '1ms/div',
  activeChannels: 'CH1, CH2',
  measurementCount: 0
})

// äº‹ä»¶å¤„ç†
const handleRunningChange = (running: boolean) => {
  currentStatus.value.running = running
  console.log('ç¤ºæ³¢å™¨è¿è¡ŒçŠ¶æ€å˜åŒ–:', running)
}

const handleTriggerEvent = (triggerInfo: any) => {
  console.log('è§¦å‘äº‹ä»¶:', triggerInfo)
}

const handleMeasurementUpdate = (measurements: any[]) => {
  currentStatus.value.measurementCount = measurements.length
  console.log('æµ‹é‡æ›´æ–°:', measurements)
}
</script>

<style lang="scss" scoped>
.oscilloscope-view {
  padding: 24px;
  max-width: 1400px;
  margin: 0 auto;
}

.page-header {
  text-align: center;
  margin-bottom: 48px;
  
  .page-title {
    font-size: 36px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 12px;
  }
  
  .page-subtitle {
    font-size: 18px;
    color: var(--text-secondary);
    line-height: 1.6;
  }
}

.demo-section,
.features-section,
.specs-section,
.monitoring-section {
  margin-bottom: 48px;
  
  .section-header {
    margin-bottom: 24px;
    
    .section-title {
      font-size: 24px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 8px;
    }
    
    .section-description {
      font-size: 16px;
      color: var(--text-secondary);
      line-height: 1.6;
    }
  }
}

.demo-container {
  background: var(--surface-color);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  padding: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 24px;
  
  .feature-item {
    background: var(--surface-color);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 24px;
    text-align: center;
    transition: all 0.3s ease;
    
    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    }
    
    .feature-icon {
      font-size: 32px;
      margin-bottom: 16px;
    }
    
    h4 {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 8px;
    }
    
    p {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin: 0;
    }
  }
}

.specs-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 24px;
  
  .spec-category {
    background: var(--surface-color);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 20px;
    
    h4 {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 16px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border-color);
    }
    
    .spec-items {
      .spec-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px solid #f0f0f0;
        
        &:last-child {
          border-bottom: none;
        }
        
        .spec-label {
          font-size: 14px;
          color: var(--text-secondary);
        }
        
        .spec-value {
          font-size: 14px;
          font-weight: 600;
          color: var(--text-primary);
          font-family: 'Consolas', 'Monaco', monospace;
        }
      }
    }
  }
}

.monitoring-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  
  .monitor-card {
    background: var(--surface-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 16px;
    text-align: center;
    
    h4 {
      font-size: 12px;
      font-weight: 500;
      color: var(--text-secondary);
      margin-bottom: 8px;
      text-transform: uppercase;
    }
    
    .monitor-value {
      font-size: 16px;
      font-weight: 600;
      font-family: 'Consolas', 'Monaco', monospace;
      
      &.active {
        color: #67c23a;
      }
      
      &.inactive {
        color: #909399;
      }
    }
  }
}

@media (max-width: 768px) {
  .oscilloscope-view {
    padding: 16px;
  }
  
  .page-header {
    margin-bottom: 32px;
    
    .page-title {
      font-size: 28px;
    }
    
    .page-subtitle {
      font-size: 16px;
    }
  }
  
  .features-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }
  
  .specs-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }
  
  .monitoring-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
  }
}
</style>
